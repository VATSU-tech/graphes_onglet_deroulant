<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Menu Graphique Dynamique Multi-Niveaux</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f7f7f7;
        margin: 0;
        padding: 30px;
    }

    /* === MENU TOP === */
    .menu {
        background: #222;
        padding: 0;
        margin: 0;
        list-style: none;
        display: flex;
        box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    }

    .menu > li {
        position: relative;
    }

    .menu > li > a {
        display: block;
        padding: 15px 25px;
        color: white;
        text-decoration: none;
        font-weight: bold;
    }

    .menu > li:hover {
        background: #111;
    }

    /* === SOUS-MENUS === */
    .submenu {
        position: absolute;
        left: 0;
        top: 100%;
        background: #333;
        list-style: none;
        padding: 0;
        margin: 0;
        display: none;
        min-width: 170px;
        border-radius: 3px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    }

    .submenu li a {
        display: block;
        padding: 12px 18px;
        color: #ddd;
        text-decoration: none;
        white-space: nowrap;
    }

    .submenu li:hover > a {
        background: #007bff;
        color: white;
    }

    /* === MULTI-NIVEAUX === */
    li:hover > .submenu {
        display: block;
    }

    .submenu .submenu {
        top: 0;
        left: 100%;
        border-radius: 3px;
    }
</style>
</head>
<body>

<ul class="menu" id="menuRoot"></ul>

<script>
/* ===========================================================
   ARBRE DU GRAPHE — Chaque feuille peut recevoir une fonction
   =========================================================== */
const graphMenu = [
    {
        title: "CATEGORIES",
        children: [
            { title: "Work 1", action: () => alert("Work 1 clicked!") },
            { title: "Work 2", action: () => alert("Work 2 clicked!") },
            { 
                title: "Work 3",
                children: [
                    { 
                        title: "Work 31",
                        action: () => alert("Work 31 executed!") 
                    },
                    { 
                        title: "Work 32",
                        action: () => alert("Work 32 executed!") 
                    },
                    { 
                        title: "Work 33",
                        children: [
                            { title: "Work 331", action: () => alert("Work 331!") },
                            { title: "Work 332", action: () => alert("Work 332!") },
                            { title: "Work 333", action: () => alert("Work 333!") }
                        ]
                    }
                ]
            }
        ]
    },
    {
        title: "WORK",
        children: [
            { title: "Design", action: () => alert("Design clicked!") },
            { title: "Photos", action: () => alert("Photos clicked!") },
        ]
    },
    {
        title: "ABOUT",
        action: () => alert("About page")
    },
    {
        title: "CONTACT",
        action: () => alert("Contact clicked")
    }
];

/* ===========================================================
   GENERATION AUTOMATIQUE DU MENU (RÉCURSIVE)
   =========================================================== */
function buildMenu(nodeList) {
    const ul = document.createElement("ul");
    ul.className = "submenu";

    nodeList.forEach(node => {
        const li = document.createElement("li");
        const a = document.createElement("a");
        a.textContent = node.title;
        a.href = "#";

        if (node.action) {
            a.onclick = node.action;  // FEUILLE AVEC FONCTION
        }

        li.appendChild(a);

        // S'il y a des enfants, créer un sous-menu
        if (node.children && node.children.length) {
            li.appendChild(buildMenu(node.children));
        }

        ul.appendChild(li);
    });

    return ul;
}

/* ===========================================================
   CREATION MENU TOP
   =========================================================== */
function buildTopLevelMenu() {
    const root = document.getElementById("menuRoot");

    graphMenu.forEach(category => {
        const li = document.createElement("li");

        const a = document.createElement("a");
        a.textContent = category.title;
        a.href = "#";

        if (category.action) {
            a.onclick = category.action;
        }

        li.appendChild(a);

        if (category.children) {
            li.appendChild(buildMenu(category.children));
        }

        root.appendChild(li);
    });
}

buildTopLevelMenu();
</script>

</body>
</html>
